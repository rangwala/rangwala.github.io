bjectives: </b> The objective of this assignment is to get you familiar with memory hierarchies using a cache simulator and exercises for processor design. 

<b> Grading: </b> 10%.

<b> Teams: </b> Maximum of 2.


<b>Due Date: </b> 12.06.2010   

<hr>

In class  on 12.06.2010 please submit a hard-copy for both Parts 1 and 2.  I prefer you use latex or MS-word for this assignment.
<hr>

<b> Part 1: Exercises from the Book [50 points]</b>
<ol>
<li>
4.16.4, 4.16.6 (PART A -only) [10 points]
</li>
<li>
4.18.1, 4.18.3 (PART A - only) [10 points]
</li>

<li>
4.28.2, 4.28.3, 4.28.4 (PART A - only) [15 points]
Assume that Answer for 4.28.1 is
<code>
add $1,$zero,$zero
Again: beq $1,$2,End
           add $6,$3,$1 
                      lw $7,0($6)
                                 add $8,$4,$1
                                            sw $7,0($8)
                                                       addi $1,$1,1
                                                                  beq $0,$0,Again
                                                                  End:

                                                                  </code>
                                                                  </li>
                                                                  <li>5.3.2 (Part A only) [5 points]
                                                                  </li> 
                                                                  <li>5.7.2, 5.7.4 (PART - A only) [10 points]
                                                                  </li> 

                                                                  </ol>


                                                                  <hr>
                                                                  <b> Part 2: Cache Simulation Using DineroIV [50 points]</b>

                                                                  <a href="http://pages.cs.wisc.edu/~markhill/DineroIV/"> Dinero IV  </a> is a cache simulator for memory reference traces developed by J. Elder and M. Hill at the University of Wisconsin, Madison.


                                                                  You have to  analyze a trace of the address references generated by a MIPS processor (in running a real program). These traces specify whether the memory reference is an instruction fetch, a data read (LOAD), or a data write (STORE). The basic command to run Dinero is:

                                                                  <code><font color="red">
                                                                   dineroIV [options] < tracefile
                                                                   </font></code>

                                                                   For each reference, Dinero IV simulates the behavior of the specified cache configuration and generates hits and misses as appropriate. At the end of the simulation, it produces a set of statistics which summarizes the performance of the simulation, including number of references, misses and memory traffic generated by the processor.

                                                                   <b> Input Trace File: </b>

                                                                   You are going to examine 1  trace files in "traditional din" format (remember to use the option "-informat d" in the simulation). This file is called <b>spice.din</b> which has memory access information when running a  famous circuit simulator called SPICE.

                                                                   <b> Setup: </b>

                                                                   The dineroIV cache simulator have been installed and made available to you on zeus.ite.gmu.edu. You should know how to ssh into zeus.

                                                                   The location of dineroIV as well as the trace files are (Appropriate file permissions have been set).

                                                                   <code>
                                                                   <ul>
                                                                   <li>dineroIV: /home/hrangwal/d4-7/dineroIV </li>
                                                                   <li> spice.din: /home/hrangwal/d4-7/data_traces/spice.din </li>
                                                                   </ul>
                                                                   </code>

                                                                   <b> <font color="navy"> Task 1: Evaluation of cache sizes and block sizes.  </font></b>

                                                                   Assume a unified cache. Perform simulation using unified cache sizes of 2K, 4K, 8K, 16K and 32K with block sizes of 16, 32, 64 and 128 bytes for each of the above cache size (total of 20 combinations). Use default options for the rest of cache configurations. 

                                                                   Example of how to set a unified cache of 2K with block size of 16.

                                                                   <code> <font color="red">
                                                                   dineroIV -informat d -l1-usize 2K -l1-ubsize 16  < spice.din 
                                                                   </font></code>

                                                                   <ol>
                                                                   <li>Plot the simulations results in a graph for average miss rate [Demand miss rate] for different cache configurations.

                                                                   Format of the graph: Average miss rate (Y-axis) against block size (X-axis) with different cache size in the same graph 
                                                                   </li>
                                                                   <li>
                                                                    Plot the simulations results in graphs for average memory traffic [Total Bytes r/w Mem ( / Demand Fetches) ] for different cache configurations.

                                                                    Format of the graph: Average memory traffic (Y-axis) against block size (X-axis) with different cache size in the same graph.
                                                                    </li>

                                                                    <li> Be sure to comment on the trends of average miss rate and average memory traffic. What do you think is the best configuration for the spice simulation trace ? Assume cost of the cache.</li>

                                                                    <b> <font color="navy"> Task 2: Evaluation of  associativity and replacement policy for the cache blocks.  </font></b>

                                                                    Assume a cache with data block size of 16 bytes and data cache size of 16K for all simulations. Simulate using set associativity of 1 (direct-mapped), 2, 4, 8 with replacement policies of LRU and Random for your simulations. (Total of 8 combinations). Use default options for the rest of cache configurations.

                                                                    Example of how to set the data cache size with 16K, block size 16 bytes, set-associativity of 2 and replacement policy = LRU


                                                                    <code> <font color="red">
                                                                    dineroIV -informat d -l1-dsize 16K -l1-dbsize 16  -l1-dassoc 2 -l1-drepl l  < spice.din 
                                                                    </font></code>

                                                                    How to set replacement policy = RANDOM
                                                                    <code> <font color="red">
                                                                    -l1-drepl r
                                                                    </font> </code>

                                                                    <ol>
                                                                    <li>Plot the simulations results in a graph for average miss rate [Demand miss rate] for different configurations.

                                                                    Format of the graph: Average miss rate (Y-axis) against set associativity size (X-axis) with different replacement policies in the same graph.
                                                                    </li>

                                                                    <li>
                                                                    Plot the simulations results in graphs for average memory traffic [Total Bytes r/w Mem ( / Demand Fetches) ] for different cache configurations.

                                                                    Format of the graph: Average memory traffic (Y-axis) against set associativity size (X-axis) with different replacement policies in the same graph.
                                                                    </li>

                                                                    <li>
                                                                    Be sure to comment on the trends of average miss rate and average memory traffic for the different associativity sizes and replacement policies. </li>
                                                                    </ol>

                                                                    <b> Deliverable and Hint for Part 2 </b>

                                                                    We would like to see a report with 4 plots. This is an example of how researchers evaluate different parameters. The best way to do this assignment is to write a shell, perl or python script that allows you to vary the different parameters for the cache simulation. The script should could be able to call the runs, extract the needed outputs to plot the different points, and maybe plot the data as needed. The plotting can be done using "gnuplot", "matplotlib", "matlab" or even MS excel. Remember to start early, have fun and feel free to vary other parameters for the cache simulator if you like.


