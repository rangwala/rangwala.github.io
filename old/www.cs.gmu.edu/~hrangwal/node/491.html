<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>HW 1 (CS 635) | MLBio+ Laboratory</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/~hrangwal/sites/all/themes/nitobe/favicon.ico" type="image/x-icon" />
		<link type="text/css" rel="stylesheet" media="all" href="/~hrangwal/sites/default/files/css/css_eaed5ee67284326ba9e2a752c33bb566.css" />
<link type="text/css" rel="stylesheet" media="screen" href="/~hrangwal/sites/default/files/css/css_a5d34e900b3fb4657272ecfb0d3f0ee7.css" />
<link type="text/css" rel="stylesheet" media="print" href="/~hrangwal/sites/default/files/css/css_1f691132d615fa9edb76248c88e261a9.css" />
<style type="text/css">#masthead{background-image:url(http://www.cs.gmu.edu/~hrangwal/sites/all/themes/nitobe/headers/Earth_from_ISS.jpg);}</style>
		<script type="text/javascript" src="/~hrangwal/sites/default/files/js/js_7f97b92a3f70662cff6fd903d3a092d8.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/~hrangwal/" });
//--><!]]>
</script>
		<!--[if lt IE 8]>
			<link type="text/css" rel="stylesheet" media="screen" href="/~hrangwal/sites/all/themes/nitobe/styles/fix-ie.css" />
		<![endif]-->
	</head>
	<body class="nitobe not-front not-logged-in page-node node-type-page one-sidebar sidebar-left">
		<div id="page-wrapper" class="clear-block">
			<div id="header-area" class="container-16">
				<div id="title-group" class="grid-12">
			            <a href="/~hrangwal/" title="MLBio+ Laboratory"><img src="/~hrangwal/sites/all/themes/nitobe/logo.png" alt="" id="logo" /></a>			            <span id="site-title"><a href="/~hrangwal/" title="MLBio+ Laboratory">MLBio+<span class="alt-color">Laboratory</span></a></span>			            <span id="site-slogan">Machine Learning in Biomedical Informatics</span>			        </div><!-- /title-group -->
			        			        			        	<div id="search-top" class="grid-4"><form action="/~hrangwal/node/491"  accept-charset="UTF-8" method="post" id="search-theme-form">
<div><div id="search" class="container-inline">
  <div class="form-item" id="edit-search-theme-form-1-wrapper">
 <label for="edit-search-theme-form-1">Search this site: </label>
 <input type="text" maxlength="128" name="search_theme_form" id="edit-search-theme-form-1" size="15" value="" title="Enter the terms you wish to search for." class="form-text" />
</div>
<input type="submit" name="op" id="edit-submit" value="Search"  class="form-submit" />
<input type="hidden" name="form_build_id" id="form-b9e98078330eed0f90878f7730e6ef39" value="form-b9e98078330eed0f90878f7730e6ef39"  />
<input type="hidden" name="form_id" id="edit-search-theme-form" value="search_theme_form"  />
</div>

</div></form>
</div>
			                  		<hr class="break"/>
          		            		<div id="header-links" class="grid-16">
            		    <ul id="primary-nav" class="grid-16"><li class="menu-143 first"><a href="/~hrangwal/myself" title="Huzefa Rangwala">Home</a></li>
<li class="menu-567"><a href="https://cs.gmu.edu/~hrangwal/blog/" title="">News</a></li>
<li class="menu-498"><a href="/~hrangwal/mlbio" title="">Projects</a></li>
<li class="menu-462"><a href="/~hrangwal/biblio" title="Displays all the Publications">Publications</a></li>
<li class="menu-349"><a href="/~hrangwal/dmrg" title="Data Mining Reading Group">Reading Group</a></li>
<li class="menu-146"><a href="/~hrangwal/node/4" title="Software and Web Servers">Software</a></li>
<li class="menu-305"><a href="/~hrangwal/node/122" title="Service">Service</a></li>
<li class="menu-500"><a href="/~hrangwal/node/91" title="">Members</a></li>
<li class="menu-148"><a href="/~hrangwal/node/7" title="Classes">Teaching</a></li>
<li class="menu-501 last"><a href="/~hrangwal/node/373" title="Contact Information">Contact</a></li>
</ul>            		                  			<hr class="break"/>
            		                		              			</div><!-- #header-links -->
          		          		
		         	
			<div id="masthead" class="grid-16">
			              		</div><!-- /masthead -->
          		<hr class="rule-top grid-16"/>
          		 	
			</div><!-- /header-area -->
			<hr class="break"/>
			<div id="content-area" class="container-16">
				<div id="content" class="grid-12 push-4">
					<div class="breadcrumb"><a href="/~hrangwal/">Home</a></div>																				          				<div id="page-headline" class="clear-block">
    					    <h1 id="page-title" >HW 1 (CS 635)</h1>    					              				</div><!-- #page-headline -->
														<div id="node-491" class="node  node-page clear-block">
  <div class="content clear-block">
            <span class='print-link'></span><p><b> Recommender System Algorithm using pThreads &amp; OpenMP </b></p>
<p><b> Teams: </b> Maximum - 2</p>
<p><b> Due Date: </b> February 12, 2014 [4:29 PM EST]</p>
<p><b> Introduction : </b>The purpose of this assignment is to become familiar with pthreads and OpenMP by parallelizing a serial program that computes the k-most similar users of a set of users from a user-movie rating matrix. This operation is one of the first step in developing a nearest neighbor based recommender system and we are doing it in parallel.</p>
<p>I have provided a serial version of the program within the archive (<a href="http://www.cs.gmu.edu/~hrangwal/files/serial.tar.gz">serial.tar.gz </a>), which takes as input the number of nearest neighbors, input rating file, output file name and number of threads. Download and build the program (Run Make). You can run it by executing the following command</p>
<p>"rsys1.0 nnbrs input_file output_file num_threads" where nnbrs is the number of neighbors, input_file is the input_file name, output_file is the output_file name which will store the neighbor List for each user and num_threads accepts the number of threads the program should use. In the serial version this does not do anything but sets the num_threads to the value provided on the command line. </p>
<p>Example:</p>
<p>"rsys1.0 100 ./data/ml100K.dat .ml100k.out 1"</p>
<p>The datasets were downloaded from the <a href="http://grouplens.org/datasets/movielens/"> MovieLens Dataset Page. </a></p>
<p><b> Format of Dataset Files: </b></p>
<p>Each of the input files provided in the data folder within the serial.tar.gz  are formatted to have the first row provide information about "Number of users", "Number of items/movies" and "Number of Non-Zero Ratings (nnratings)"<br />
The first line is then followed by nnrating number of rows where each row provides information about a single rating. The format of each line is a tab/space limited and has the following fields "user id | item id | rating | timestamp."</p>
<p><b> Documentation on serial recsys: </b></p>
<p><i> recommenders.c </i> holds the entry point for the program and includes main.<br />
<i> compute.c </i> includes functions for computing all-pairs user-to-user cosine based similarity and the nearest neighbor function using the quickselect algorithm to find the k-largest element in an array. Also, note the pairwise similarity assumes using sparse format for representing the rating Matrix.<br />
<i>io.c </i> contains functions for general I/O<br />
<i>timing.c </i> contains functions for implementing a timer. You will need to use this for profiling your code.</p>
<p><i>struct.h </i> lists the different data structures. Look at CtrlType (holds input parameters) and sparseRecDB holds the data read from user-movie ratings file within a sparse format. nusers are the total number of users (rows) and nprods  are total number of products (cols) and nnratings are the number of non-zero ratings. The data structure sparseRecDB  includes the following three 1-dimensional arrays:</p>
<ul>
<li>user_indices: of size nusers+1; user_indices[i] contains the index in prd_indices/ratings of the first nonzero element of user i and user[i+1]-1 contains the index in prd_indices/ratings of the last nonzero element of user i </li>
<li>prd_indices: of size nnratings; contains the items/products that were rated by the user </li>
<li>ratings: of size nnratings; is the actual rating that was provided by the user. </li>
</ul>
<p>The format of this sparse matrix is also called <a href="http://en.wikipedia.org/wiki/Sparse_matrix">Yale Sparse Matrix Format </a></p>

<p><i>proto.h
<li> includes the different functions prototypes.<br />
<i>recommenders.h</i> includes the various header files. If you create a new file it is best to include #include<recommenders.h> within that file.</recommenders.h></li></i></p>
<p><i> Makefile </i> compiles the code and links to create an executable. If you are using this Makefile for compiling openMP or pThreads be sure to include the correct flags.</p>
<p><b> Requirements/Guidelines:</b></p>
<ol>
<li>Your task is to develop a pthreads and an OpenMP version of the recSys1.0 program that should scale well all the way up to 16 threads. Test your programs on tesla1 or tesla2 based on your Last Name. If your last name begins with A-L then use tesla1 else use tesla2. That means that the speedup that you should be getting should be greater than 15. That speedup should be realized for the following three input datasets provided within the ./data folder
<p>    (i) ml100K.dat (has 100K ratings), (ii) ml1ML.dat (has 1 million ratings) and (iii) ml100ML.dat (has 10 million ratings)</p>
</li>
<li> Use the programs that you developed to find the 50, 100 and 200 neighbors for each user. That is, run the program using 50, 100 and 200 neighbors as arguments. Report the run-time for pairwise similarity task and k-nearest neighbor computation task. You are free to change the logic of implemented functions in compute.c </li>
<li> The output file produced by your parallel program should be identical to that produced by the serial program. That is, the set of neighbors for each document will be output starting for the neighbors of user 0, followed by the neighbors of user 1, and so on. Note that during development of your program, you can output the results into a file to make sure that they are similar. Once you know that they are similar, there is no point providing the output file name (especially for the larger files).  Just comment out the print function from recommenders.c </li>
<li>Keep the source trees for the pthread and openMP version of your program separately. Name the respective directories `pthreads-recSys' and `openmp-recSys'. Put all the parallel logic of each implementation into the file `compute.c' or 'recommenders.c'. This is a requirement, as this will be the only file that the instructor will look while grading your program. The binaries for both source trees should still be 'recSys1.0'.
</li>
<li> Modify the command line arguments to accept number of threads as a command line argument </li>
</ol>
<p><b>What you need to turn in </b></p>
<ol>
<li> The source files of your programs. </li>
<li> A short writeup describing how you went about parallelizing the algorithm. [Half a Page]</li>
<li> Timing results on 1, 2, 4, 8 and 16 processors for your programs for each one of the above version  on the three datasets. (Dataset 3 is large and will take some time to compute.). You can compile these timing results into nice-looking charts. Include them in the above report. </li>
<li> Comment on your observations from above. Are all processors (threads) load-balanced ?  Compare the performance of OpenMP and pThreads versions ? Which paradigm was more suited and allowed for additional flexibility.  </li>
</ol>
<p><b>How to submit your programs/report </b></p>
<ol>
<li>     Create a directory that has the following structure: </li>
<li>  gmu-user-name/pthreads-recSys/your-source-files-go-here </li>
<li> gmu-user-name/openmp-recSys/your-source-files-go-here </li>
<li> gmu-user-name/report/the-pdf-of-your-report </li>
<li> Make sure that each of your source file directories can be built by simply executing 'make'. </li>
<li> Do not put any test files in the above directories.</li>
<li>     Create a tar file from the above directory structure and compress it. That is the file should be "gmu-user-name-.tar.gz" </li>
<li>         Upload that single file in the blackboard website by the due date. </li>
<li>  Feel free to copy the Makefile and modify it to include any extra files which you may have. </li>
<li>  Please submit reports in .pdf format, not .doc or .docx </li>
</ol>
<p><b> Evaluation Criterion </b></p>
<ol>
<li>[60%] Correctness of Parallel Code &amp; Speedup Achieved </li>
<li>[40%] Benchmarking and Reporting of Results </li>
</ol>
  </div>
      <div class="meta">
                <div class="links"><ul class="links inline"><li class="print_mail first last"><a href="/~hrangwal/printmail/491" title="Send this page by e-mail." class="print-mail" rel="nofollow">Send to friend</a></li>
</ul></div>
          </div>
  </div> <!-- node -->
				</div><!-- /content -->
									<div id="left-sidebar" class="grid-4 pull-12">
					  <div id="block-menu-menu-classes" class="block block-menu block-left">
    	<h2>Classes</h2>
    <ul class="menu"><li class="leaf first"><a href="/~hrangwal/cs367" title="CS 367: Computer Systems and Programming">CS 367 (Fall 2017)</a></li>
<li class="expanded last active-trail"><a href="/~hrangwal/node/7" title="">Archived Classes</a><ul class="menu"><li class="leaf first"><a href="/~hrangwal/cs584F2016" title="CS 584: Data Mining (Syllabus Page)">CS 584</a></li>
<li class="collapsed"><a href="/~hrangwal/cs584F2015" title="CS 659: Theory and Applications of Data Mining">CS 584 (TASC)</a></li>
<li class="collapsed"><a href="/~hrangwal/cs695Sp15SocNet" title="CS 695: Social and Information Network Analysis">CS 695 (Spring 2015)</a></li>
<li class="collapsed"><a href="/~hrangwal/cs465F2014" title="CS 465 (Fall 2014)">CS 465 (Fall 2014)</a></li>
<li class="expanded active-trail"><a href="/~hrangwal/CS635Spring2014" title="CS 635: Foundations of Parallel Computation">CS 635 (Spring 2014)</a><ul class="menu"><li class="leaf first"><a href="/~hrangwal/node/485" title="Schedule">Schedule</a></li>
<li class="leaf"><a href="/~hrangwal/node/487" title="Important Links">Links</a></li>
<li class="expanded active-trail"><a href="/~hrangwal/node/490" title="Assignments">Assignments</a><ul class="menu"><li class="leaf first"><a href="/~hrangwal/node/489" title="HW 0 (CS 635)">HW0</a></li>
<li class="leaf active-trail"><a href="/~hrangwal/node/491" title="HW 1 (CS 635)" class="active">HW 1</a></li>
<li class="leaf"><a href="/~hrangwal/node/492" title="HW 2(CS 635)">HW 2</a></li>
<li class="leaf"><a href="/~hrangwal/node/493" title="HW 3 (CS 635)">HW 3</a></li>
<li class="leaf"><a href="/~hrangwal/node/495" title="HW 4 (CS 635)">HW 4</a></li>
<li class="leaf last"><a href="/~hrangwal/node/496" title="HW 5 (CS 635)">HW 5</a></li>
</ul></li>
<li class="leaf last"><a href="/~hrangwal/node/486" title="Parallel Computing Resources">Resources</a></li>
</ul></li>
<li class="collapsed"><a href="/~hrangwal/cs465-fall2012" title="CS 465: Computer Systems and Architecture (Fall 2012)">CS 465 (Fall 2012)</a></li>
<li class="collapsed"><a href="/~hrangwal/infs755" title="INFS 755: Data Mining">INFS 755 (Fall 2011)</a></li>
<li class="collapsed"><a href="/~hrangwal/cs465F2013" title="CS 465: Computer Systems and Architecture (Fall 2013)">CS 465 (Fall 2013)</a></li>
<li class="collapsed"><a href="/~hrangwal/cs750" title="CS 750: Theory and Applications of Data Mining (Spring 2011)">CS 750 (Spring 2011)</a></li>
<li class="collapsed"><a href="/~hrangwal/cs465" title="CS 465 (Fall 2010) Computer Systems Architecture">CS 465 (Fall 2010)</a></li>
<li class="collapsed"><a href="/~hrangwal/node/20" title="Syllabus">CS 795 (Spring 2010)</a></li>
<li class="collapsed"><a href="/~hrangwal/bioml" title="CS 795 (Fall 2009) Biological Data Mining">CS 795 (Fall 2009)</a></li>
<li class="collapsed"><a href="/~hrangwal/class-bio" title="CS 795 (Spring 2009)">CS 795 (Spring 2009)</a></li>
<li class="collapsed last"><a href="/~hrangwal/node/8" title="INFS 755 Data Mining (Fall 2008)">INFS 755 (Fall 2008)</a></li>
</ul></li>
</ul></div><!-- /block-menu-menu-classes -->
<hr class="break"/>					</div><!-- /left-sidebar -->
											</div><!-- /content-area -->
			<hr class="break"/>
			<div id="bottom-blocks" class="container-16">
				<hr class="rule-bottom grid-16"/>
				<div id="bottom-left" class="grid-4">
									</div><!-- /bottom-left -->
				<div id="bottom-center-left" class="grid-4">
									</div><!-- /bottom-center-left -->
				<div id="bottom-center-right" class="grid-4">
									</div><!-- /bottom-center-right -->
				<div id="bottom-right" class="grid-4">
					<div id="block-system-0" class="block block-system block-bottom_right">
    <a href="http://drupal.org"><img src="/~hrangwal/misc/powered-blue-80x15.png" alt="Powered by Drupal, an open source content management system" title="Powered by Drupal, an open source content management system" width="80" height="15" /></a></div><!-- /block-system-0 -->
<hr class="break"/>				</div><!-- /bottom-right -->
			</div><!-- /bottom-blocks -->
			<hr class="break"/>
			<div id="footer-area" class="container-16">
				<hr class="rule-top grid-16"/>
				<div id="footer" class="grid-16">
					(c) Rangwala 2008, George Mason University, Fairfax, VA				</div><!-- /footer -->
			</div><!-- /footer-area -->
			<hr class="break"/>
		</div><!-- /page-wrapper -->
			</body>
</html>
