<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Parallel Computing Resources | MLBio+ Laboratory</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/~hrangwal/sites/all/themes/nitobe/favicon.ico" type="image/x-icon" />
		<link type="text/css" rel="stylesheet" media="all" href="/~hrangwal/sites/default/files/css/css_eaed5ee67284326ba9e2a752c33bb566.css" />
<link type="text/css" rel="stylesheet" media="screen" href="/~hrangwal/sites/default/files/css/css_a5d34e900b3fb4657272ecfb0d3f0ee7.css" />
<link type="text/css" rel="stylesheet" media="print" href="/~hrangwal/sites/default/files/css/css_1f691132d615fa9edb76248c88e261a9.css" />
<style type="text/css">#masthead{background-image:url(http://www.cs.gmu.edu/~hrangwal/sites/all/themes/nitobe/headers/Earth_from_ISS.jpg);}</style>
		<script type="text/javascript" src="/~hrangwal/sites/default/files/js/js_7f97b92a3f70662cff6fd903d3a092d8.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/~hrangwal/" });
//--><!]]>
</script>
		<!--[if lt IE 8]>
			<link type="text/css" rel="stylesheet" media="screen" href="/~hrangwal/sites/all/themes/nitobe/styles/fix-ie.css" />
		<![endif]-->
	</head>
	<body class="nitobe not-front not-logged-in page-node node-type-page one-sidebar sidebar-left">
		<div id="page-wrapper" class="clear-block">
			<div id="header-area" class="container-16">
				<div id="title-group" class="grid-12">
			            <a href="/~hrangwal/" title="MLBio+ Laboratory"><img src="/~hrangwal/sites/all/themes/nitobe/logo.png" alt="" id="logo" /></a>			            <span id="site-title"><a href="/~hrangwal/" title="MLBio+ Laboratory">MLBio+<span class="alt-color">Laboratory</span></a></span>			            <span id="site-slogan">Machine Learning in Biomedical Informatics</span>			        </div><!-- /title-group -->
			        			        			        	<div id="search-top" class="grid-4"><form action="/~hrangwal/node/486"  accept-charset="UTF-8" method="post" id="search-theme-form">
<div><div id="search" class="container-inline">
  <div class="form-item" id="edit-search-theme-form-1-wrapper">
 <label for="edit-search-theme-form-1">Search this site: </label>
 <input type="text" maxlength="128" name="search_theme_form" id="edit-search-theme-form-1" size="15" value="" title="Enter the terms you wish to search for." class="form-text" />
</div>
<input type="submit" name="op" id="edit-submit" value="Search"  class="form-submit" />
<input type="hidden" name="form_build_id" id="form-1293bdeebaf38023e4b48c93e2eed3bd" value="form-1293bdeebaf38023e4b48c93e2eed3bd"  />
<input type="hidden" name="form_id" id="edit-search-theme-form" value="search_theme_form"  />
</div>

</div></form>
</div>
			                  		<hr class="break"/>
          		            		<div id="header-links" class="grid-16">
            		    <ul id="primary-nav" class="grid-16"><li class="menu-143 first"><a href="/~hrangwal/myself" title="Huzefa Rangwala">Home</a></li>
<li class="menu-567"><a href="https://cs.gmu.edu/~hrangwal/blog/" title="">News</a></li>
<li class="menu-498"><a href="/~hrangwal/mlbio" title="">Projects</a></li>
<li class="menu-462"><a href="/~hrangwal/biblio" title="Displays all the Publications">Publications</a></li>
<li class="menu-349"><a href="/~hrangwal/dmrg" title="Data Mining Reading Group">Reading Group</a></li>
<li class="menu-146"><a href="/~hrangwal/node/4" title="Software and Web Servers">Software</a></li>
<li class="menu-305"><a href="/~hrangwal/node/122" title="Service">Service</a></li>
<li class="menu-500"><a href="/~hrangwal/node/91" title="">Members</a></li>
<li class="menu-148"><a href="/~hrangwal/node/7" title="Classes">Teaching</a></li>
<li class="menu-501 last"><a href="/~hrangwal/node/373" title="Contact Information">Contact</a></li>
</ul>            		                  			<hr class="break"/>
            		                		              			</div><!-- #header-links -->
          		          		
		         	
			<div id="masthead" class="grid-16">
			              		</div><!-- /masthead -->
          		<hr class="rule-top grid-16"/>
          		 	
			</div><!-- /header-area -->
			<hr class="break"/>
			<div id="content-area" class="container-16">
				<div id="content" class="grid-12 push-4">
					<div class="breadcrumb"><a href="/~hrangwal/">Home</a></div>																				          				<div id="page-headline" class="clear-block">
    					    <h1 id="page-title" >Parallel Computing Resources</h1>    					              				</div><!-- #page-headline -->
														<div id="node-486" class="node  node-page clear-block">
  <div class="content clear-block">
            <span class='print-link'></span><p>
For the programming assignments we will use the  cluster <a href="http://labs.vse.gmu.edu/index.php/Systems/MedusaCluster"> medusa.vsnet.gmu.edu</a>. This will allow us to do MPI/OpenMP and pThread assignments. </p>
<p>For GPU/CUDA assignments we will use tesla1.vsnet.gmu.edu and tesla2.gmu.edu</p>
<p>You should be able to access these machines using your GMU netid. Remember passwords may need to be reset.  Here are some general instructions on <a href="http://labs.vse.gmu.edu/index.php/FAQ/SSH"> how to ssh into these machines. </a></p>
<p>You also need to do passwordless login setup. This can be done by using <a href="http://www.thegeekstuff.com/2008/11/3-steps-to-perform-ssh-login-without-password-using-ssh-keygen-ssh-copy-id/"> ssh-keygen as follows.</a> Essentially first login into medusa and then follow the steps to login into other compute nodes and tesla1/tesla2.</p>
<p>The following are some general instructions on how to get your MPI/OpenMP/pthreads/Cuda codes compiled and running: </p>
<hr />
<div>
<legend> MPI on Medusa  </legend>
<ol>
<li> Log into the head node medusa.vsnet.gmu.edu</li>
<li> Run "module load rocks-openmpi" </li>
<li>Using your favorite text editor create a file named "hosts" in your $HOME directory. The file should contain the following list of hostnames:
<p>compute-0-0 slots=4<br />
compute-0-1 slots=4<br />
compute-0-2 slots=4<br />
compute-0-3 slots=4<br />
compute-0-4 slots=4<br />
compute-0-5 slots=4<br />
compute-0-6 slots=4<br />
compute-0-7 slots=4<br />
compute-0-8 slots=4<br />
compute-0-9 slots=4<br />
compute-0-10 slots=4<br />
compute-0-11 slots=4<br />
compute-0-12 slots=4<br />
compute-0-13 slots=4<br />
compute-0-14 slots=4<br />
compute-0-15 slots=4<br />
compute-0-16 slots=4<br />
compute-0-17 slots=4<br />
compute-0-18 slots=4<br />
compute-0-19 slots=4
</p></li>
<li> To test MPI create a file called "hello_mpi.c" and copy<br />
<code><verbatim>
<p>// Author: Huzefa Rangwala<br />
// Date: 11.26.2013</p>
<p>#include &lt; mpi.h > // remember to include the mpi header<br />
#include &lt; stdio.h ></p>
<p>int main(int argc, char *argv[])<br />
{</p>
<p> int num_procs, myid, name_len;<br />
 char proc_name[MPI_MAX_PROCESSOR_NAME];</p>
<p>// Initialize MPI<br />
   MPI_Init(&amp;argc, &amp;argv);</p>
<p> // Obtain the number of processes<br />
   MPI_Comm_size(MPI_COMM_WORLD, &amp;num_procs);</p>
<p> // Obtain the process id<br />
   MPI_Comm_rank(MPI_COMM_WORLD, &amp;myid);</p>
<p> // Obtain name of machine process is executing on<br />
   MPI_Get_processor_name(proc_name, &amp;name_len);</p>
<p>   printf("Hello World from processor %d out of %d, executing on %s\n", myid, num_procs, proc_name);</p>
<p> // Last call to MPI (REQUIRED)<br />
  MPI_Finalize();</p>
<p>  return 0;<br />
  } </p>
<p></p></verbatim></code> </li>
<li>Compile the program: mpicc -o hello_mpi.ex hello_mpi.c </li>
<li> Run your compiled program: mpirun --hostfile ~/hosts -np 4 ./hello_mpi.ex<br />
- here "4" is the number of processors </li>
</ol>
</div>
<div>
<legend>OpenMP on Medusa/Tesla </legend>
<ol>
<li> Login into medusa.vsnet.gmu.edu, tesla1.vsnet.gmu.edu, tesla2.vsnet.gmu.edu </li>
<li>  To test OpenMP create a test source file "hello_omp.c"<br />
<code><verbatim><br />
#include &lt; omp.h > // Remember to include the OpenMP Header<br />
#include &lt; stdio.h >
<p>/* Define the number of threads<br />
* This can be done two ways:<br />
* 1: Define the number of threads within the program by using the<br />
* function call "omp_set_num_threads()" as is done in this program<br />
* 2: Set the environment variable OMP_NUM_THREADS, e.g.<br />
* > setenv OMP_NUM_THREADS 15<br />
* (To use this method, you must remove the function call<br />
* omp_set_num_threads() from below)<br />
*/<br />
#define NUM_THREADS 15</p>
<p>int main(int argc, char *argv[])<br />
{</p>
<p>int myid;</p>
<p>// set the number of threads to use<br />
omp_set_num_threads(NUM_THREADS);</p>
<p>/* Define a parallel segment within the code<br />
* A total of NUM_THREADS threads will be created and execute<br />
* the following code in parallel<br />
* myid is declared as a private variable (each thread will have<br />
* access to a unique memory address for myid, versus a public variable where<br />
* each thread would point to the same memory address for myid)<br />
*/<br />
#pragma omp parallel private(myid)<br />
{<br />
myid = omp_get_thread_num();</p>
<p>printf("Hello World from thread %d\n", myid);<br />
}</p>
<p>}<br />
</p></verbatim></code>
</li>
<li>Compile the test code: gcc -fopenmp -o hello_omp.ex hello_omp.c </li>
<li> Execute the compiled code: ./hello_omp.ex </li>
</ol>
</div>
<div>
<legend>pThreads on medusa </legend>
<ol>
<li> Login into medusa.vsnet.gmu.edu  </li>
<li>
To test pThreads create a test source file "hello_pthreads.c"
<p><code><br />
#include &lt; pthread.h > // remember to include the pthread header<br />
#include &lt; stdio.h ><br />
#include &lt; stdlib.h ></code></p>
<p>// Define the number of threads to create<br />
#define NUM_THREADS 20</p>
<p>void *hello(void *id);</p>
<p>int main(int argc, char *argv[])<br />
{</p>
<p>int myid, worker, val;</p>
<p>pthread_t threads[NUM_THREADS];</p>
<p>// Create the threads and have them start executing the function hello()<br />
for(worker = 0; worker &lt; NUM_THREADS; worker++)<br />
{<br />
val = pthread_create(&amp;threads[worker], NULL, (void *) hello, (void *) worker);<br />
if(val != 0)<br />
{<br />
printf("Error creating thread #%d, val = %d\n", worker, val);<br />
exit(-1);<br />
}<br />
}</p>
<p>pthread_exit(NULL);<br />
}</p>
<p>void *hello(void *id)<br />
{<br />
int myid;<br />
myid = (int) id;<br />
printf("Hello World from thread %d\n", myid);<br />
pthread_exit(NULL); //terminate the thread<br />
}<br />

</p></li>
<li> Compile the test code: cc -pthread -o hello_pthreads.ex hello_pthreads.c </li>
<li> Execute the compiled code: ./hello_pthreads.ex </li>
</ol>
</div>
<div>
<legend>CUDA on Tesla</legend>
<ol>
<li> Login into tesla1.vsnet.gmu.edu or tesla2.vsnet.gmu.edu </li>
<li>To test CUDA create a test source file "hello_cuda.cu"
<p><code><br />
// Borrowed from <a href="http://computer-graphics.se/hello-world-for-cuda.html" title="http://computer-graphics.se/hello-world-for-cuda.html">http://computer-graphics.se/hello-world-for-cuda.html</a><br />
// This program takes the string "Hello ", prints it, then passes it to CUDA with an array<br />
// of offsets. Then the offsets are added in parallel to produce the string "World!"<br />
// By Ingemar Ragnemalm 2010</code></p>
<p>#include &lt; stdio.h ></p>
<p>const int N = 16;<br />
const int blocksize = 16; </p>
<p>__global__<br />
void hello(char *a, int *b)<br />
{<br />
a[threadIdx.x] += b[threadIdx.x];<br />
}</p>
<p>int main()<br />
{<br />
char a[N] = "Hello \0\0\0\0\0\0";<br />
int b[N] = {15, 10, 6, 0, -11, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};</p>
<p>char *ad;<br />
int *bd;<br />
const int csize = N*sizeof(char);<br />
const int isize = N*sizeof(int);</p>
<p>printf("%s", a);</p>
<p>cudaMalloc( (void**)&amp;ad, csize );<br />
cudaMalloc( (void**)&amp;bd, isize );<br />
cudaMemcpy( ad, a, csize, cudaMemcpyHostToDevice );<br />
cudaMemcpy( bd, b, isize, cudaMemcpyHostToDevice ); </p>
<p>dim3 dimBlock( blocksize, 1 );<br />
dim3 dimGrid( 1, 1 );<br />
hello&lt;<&lt; dimGrid, dimBlock >>>(ad, bd);<br />
cudaMemcpy( a, ad, csize, cudaMemcpyDeviceToHost );<br />
cudaFree( ad );</&lt;></p>
<p>printf("%s\n", a);<br />
return EXIT_SUCCESS;<br />
} </p>
<p></p>
</li>
<li>To compile  nvcc -arch=sm_11 -v hello_cuda.cu -o hello_cuda.ex </li>
<li> To run ./hello_cuda.ex </li>
</ol>
</div>
  </div>
      <div class="meta">
                <div class="links"><ul class="links inline"><li class="print_mail first last"><a href="/~hrangwal/printmail/486" title="Send this page by e-mail." class="print-mail" rel="nofollow">Send to friend</a></li>
</ul></div>
          </div>
  </div> <!-- node -->
				</div><!-- /content -->
									<div id="left-sidebar" class="grid-4 pull-12">
					  <div id="block-menu-menu-classes" class="block block-menu block-left">
    	<h2>Classes</h2>
    <ul class="menu"><li class="leaf first"><a href="/~hrangwal/cs367" title="CS 367: Computer Systems and Programming">CS 367 (Fall 2017)</a></li>
<li class="expanded last active-trail"><a href="/~hrangwal/node/7" title="">Archived Classes</a><ul class="menu"><li class="leaf first"><a href="/~hrangwal/cs584F2016" title="CS 584: Data Mining (Syllabus Page)">CS 584</a></li>
<li class="collapsed"><a href="/~hrangwal/cs584F2015" title="CS 659: Theory and Applications of Data Mining">CS 584 (TASC)</a></li>
<li class="collapsed"><a href="/~hrangwal/cs695Sp15SocNet" title="CS 695: Social and Information Network Analysis">CS 695 (Spring 2015)</a></li>
<li class="collapsed"><a href="/~hrangwal/cs465F2014" title="CS 465 (Fall 2014)">CS 465 (Fall 2014)</a></li>
<li class="expanded active-trail"><a href="/~hrangwal/CS635Spring2014" title="CS 635: Foundations of Parallel Computation">CS 635 (Spring 2014)</a><ul class="menu"><li class="leaf first"><a href="/~hrangwal/node/485" title="Schedule">Schedule</a></li>
<li class="leaf"><a href="/~hrangwal/node/487" title="Important Links">Links</a></li>
<li class="collapsed"><a href="/~hrangwal/node/490" title="Assignments">Assignments</a></li>
<li class="leaf last active-trail"><a href="/~hrangwal/node/486" title="Parallel Computing Resources" class="active">Resources</a></li>
</ul></li>
<li class="collapsed"><a href="/~hrangwal/cs465-fall2012" title="CS 465: Computer Systems and Architecture (Fall 2012)">CS 465 (Fall 2012)</a></li>
<li class="collapsed"><a href="/~hrangwal/infs755" title="INFS 755: Data Mining">INFS 755 (Fall 2011)</a></li>
<li class="collapsed"><a href="/~hrangwal/cs465F2013" title="CS 465: Computer Systems and Architecture (Fall 2013)">CS 465 (Fall 2013)</a></li>
<li class="collapsed"><a href="/~hrangwal/cs750" title="CS 750: Theory and Applications of Data Mining (Spring 2011)">CS 750 (Spring 2011)</a></li>
<li class="collapsed"><a href="/~hrangwal/cs465" title="CS 465 (Fall 2010) Computer Systems Architecture">CS 465 (Fall 2010)</a></li>
<li class="collapsed"><a href="/~hrangwal/node/20" title="Syllabus">CS 795 (Spring 2010)</a></li>
<li class="collapsed"><a href="/~hrangwal/bioml" title="CS 795 (Fall 2009) Biological Data Mining">CS 795 (Fall 2009)</a></li>
<li class="collapsed"><a href="/~hrangwal/class-bio" title="CS 795 (Spring 2009)">CS 795 (Spring 2009)</a></li>
<li class="collapsed last"><a href="/~hrangwal/node/8" title="INFS 755 Data Mining (Fall 2008)">INFS 755 (Fall 2008)</a></li>
</ul></li>
</ul></div><!-- /block-menu-menu-classes -->
<hr class="break"/>					</div><!-- /left-sidebar -->
											</div><!-- /content-area -->
			<hr class="break"/>
			<div id="bottom-blocks" class="container-16">
				<hr class="rule-bottom grid-16"/>
				<div id="bottom-left" class="grid-4">
									</div><!-- /bottom-left -->
				<div id="bottom-center-left" class="grid-4">
									</div><!-- /bottom-center-left -->
				<div id="bottom-center-right" class="grid-4">
									</div><!-- /bottom-center-right -->
				<div id="bottom-right" class="grid-4">
					<div id="block-system-0" class="block block-system block-bottom_right">
    <a href="http://drupal.org"><img src="/~hrangwal/misc/powered-blue-80x15.png" alt="Powered by Drupal, an open source content management system" title="Powered by Drupal, an open source content management system" width="80" height="15" /></a></div><!-- /block-system-0 -->
<hr class="break"/>				</div><!-- /bottom-right -->
			</div><!-- /bottom-blocks -->
			<hr class="break"/>
			<div id="footer-area" class="container-16">
				<hr class="rule-top grid-16"/>
				<div id="footer" class="grid-16">
					(c) Rangwala 2008, George Mason University, Fairfax, VA				</div><!-- /footer -->
			</div><!-- /footer-area -->
			<hr class="break"/>
		</div><!-- /page-wrapper -->
			</body>
</html>
